{% extends "general/layout.html" %}

{% block head_title %}Bienvenido a nuestro InstaConquer{% endblock %}

{% block page_content %}
<div class="container">
    {% include '_includes/_messages.html' %}
    <h1>Perfil</h1>
    <p>Biografia: {{profile.bio|default_if_none:"Sin rellenar"}}</p>
    <p>Fecha de nacimiento: {{profile.birth_date|default_if_none:"Sin fecha"}}</p>
    {% if profile.profile_picture %}
        <img width="100px" src="{{profile.profile_picture.url}}">
    {% else %}
        <p>No dispone de foto de perfil</p>
    {% endif %}
    <p>Seguidores: {{profile.followers.count}} </p>  
    <p>Seguidos: {{profile.followers.count}} </p> 
    {% if profile not in request.user.profile.follower_set.all %}
    <p>No lo estoy siguiendo</p>
    <p>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="profile_pk" value="{{profile.pk}}">
            <button>Seguir</button>
        </form>
    </p>
    {% endif %}
    <!-- Solamente mostrar el boton de editar el perfil cuando es el mismo usuario que esta en la sesiÃ³n-->
    {% if profile.user == request.user %}
        <p><a href="{% url "profile_update" profile.pk %}">Editar</a></p> 
    {% endif %}

    <section>
        <h2>Publicaciones</h2>
        <div class="row">
            {% for post in profile.user.posts.all %}
            <div class="col-12 col-sm-6 col-md-4">
                {% include "_includes/posts/_post.html" %}
            </div>
            {% endfor %}
        </div>

    </section>
    
</div>
{% endblock %}